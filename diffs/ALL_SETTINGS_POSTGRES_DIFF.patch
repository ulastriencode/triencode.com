--- original/avukatlik_portali/settings/base.py
+++ updated/avukatlik_portali/settings/base.py
@@ -116,15 +116,22 @@
 DB_HOST = os.getenv("DB_HOST", "127.0.0.1")
 DB_PORT = os.getenv("DB_PORT", "5432")
 
+
+import os
+from pathlib import Path
+
 DATABASES = {
     "default": {
-        "ENGINE": "django_tenants.postgresql_backend",
-        "NAME": DB_NAME,
-        "USER": DB_USER,
-        "PASSWORD": DB_PASSWORD,
-        "HOST": DB_HOST,
-        "PORT": DB_PORT,
+        "ENGINE": "django.db.backends.postgresql",
+        "NAME": os.getenv("POSTGRES_DB", "avukatlik_portali"),
+        "USER": os.getenv("POSTGRES_USER", "postgres"),
+        "PASSWORD": os.getenv("POSTGRES_PASSWORD", "postgres"),
+        "HOST": os.getenv("POSTGRES_HOST", "127.0.0.1"),
+        "PORT": os.getenv("POSTGRES_PORT", "5432"),
+        "OPTIONS": {"connect_timeout": 10},
     }
+}
+DATABASE_ROUTERS = ["django_tenants.routers.TenantSyncRouter"]
 }
 
 AUTH_USER_MODEL = "users.User"


--- original/portal/settings/base.py
+++ updated/portal/settings/base.py
@@ -19,6 +19,7 @@
 ]
 
 MIDDLEWARE = [
+    'django_tenants.middleware.main.TenantMainMiddleware',
     "django.middleware.security.SecurityMiddleware",
     "django.contrib.sessions.middleware.SessionMiddleware",
     "django.middleware.common.CommonMiddleware",
@@ -55,11 +56,22 @@
 
 DEFAULT_AUTO_FIELD = "django.db.models.BigAutoField"
 
+
+import os
+from pathlib import Path
+
 DATABASES = {
     "default": {
-        "ENGINE": "django.db.backends.sqlite3",
-        "NAME": BASE_DIR / "db.sqlite3",
+        "ENGINE": "django.db.backends.postgresql",
+        "NAME": os.getenv("POSTGRES_DB", "avukatlik_portali"),
+        "USER": os.getenv("POSTGRES_USER", "postgres"),
+        "PASSWORD": os.getenv("POSTGRES_PASSWORD", "postgres"),
+        "HOST": os.getenv("POSTGRES_HOST", "127.0.0.1"),
+        "PORT": os.getenv("POSTGRES_PORT", "5432"),
+        "OPTIONS": {"connect_timeout": 10},
     }
+}
+DATABASE_ROUTERS = ["django_tenants.routers.TenantSyncRouter"]
 }
 
 CACHES = {
@@ -82,3 +94,6 @@
 }
 
 DEFAULT_TENANT_DOMAIN = os.getenv("DEFAULT_TENANT_DOMAIN", "firma1.localhost")
+
+TENANT_MODEL = 'clients.Client'
+TENANT_DOMAIN_MODEL = 'clients.Domain'
